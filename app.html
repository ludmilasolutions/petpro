
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tu Mascota Online - Aplicaci√≥n</title>
    <link rel="manifest" href="/manifest.json">
    <link rel="icon" type="image/x-icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üêæ</text></svg>">
    <meta name="theme-color" content="#4f46e5">
    
    <!-- Link al archivo CSS separado -->
    <link rel="stylesheet" href="style.css">
    
    <!-- Scripts de Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
    
    <!-- Script de la aplicaci√≥n -->
    <script src="app.js" defer></script>
</head>
<body>
    <header class="app-header">
        <div class="container">
            <div class="header-content">
                <a href="/app.html" class="logo">
                    <span class="logo-icon">üêæ</span>
                    <span>Tu Mascota Online</span>
                </a>
                
                <div class="user-menu">
                    <div class="user-info">
                        <span class="user-name" id="user-name">Cargando...</span>
                        <span class="user-role" id="user-role">Cargando...</span>
                    </div>
                    <img id="user-avatar" class="user-avatar" src="" alt="Avatar">
                    <button id="logout-btn" class="logout-btn">Cerrar sesi√≥n</button>
                </div>
            </div>
        </div>
    </header>

    <div class="app-container">
        <nav class="sidebar">
            <div class="nav-section">
                <h3 class="nav-title">Principal</h3>
                <ul class="nav-menu">
                    <li class="nav-item active" data-section="dashboard">
                        <span class="nav-icon">üìä</span>
                        <span>Dashboard</span>
                    </li>
                </ul>
            </div>
            
            <div class="nav-section" id="owner-nav" style="display: none;">
                <h3 class="nav-title">Mis Mascotas</h3>
                <ul class="nav-menu">
                    <li class="nav-item" data-section="pets">
                        <span class="nav-icon">üêï</span>
                        <span>Mis Mascotas</span>
                    </li>
                    <li class="nav-item" data-section="add-pet">
                        <span class="nav-icon">‚ûï</span>
                        <span>Agregar Mascota</span>
                    </li>
                    <li class="nav-item" data-section="authorized-vets">
                        <span class="nav-icon">üè•</span>
                        <span>Veterinarias Autorizadas</span>
                    </li>
                    <li class="nav-item" data-section="appointments">
                        <span class="nav-icon">üìÖ</span>
                        <span>Mis Turnos</span>
                    </li>
                    <li class="nav-item" data-section="medical-history">
                        <span class="nav-icon">üè•</span>
                        <span>Historial M√©dico</span>
                    </li>
                </ul>
            </div>
            
            <div class="nav-section" id="vet-nav" style="display: none;">
                <h3 class="nav-title">Veterinaria</h3>
                <ul class="nav-menu">
                    <li class="nav-item" data-section="vet-dashboard">
                        <span class="nav-icon">üìã</span>
                        <span>Panel Veterinaria</span>
                    </li>
                    <li class="nav-item" data-section="vet-appointments">
                        <span class="nav-icon">üìÖ</span>
                        <span>Turnos</span>
                    </li>
                    <li class="nav-item" data-section="search-pets">
                        <span class="nav-icon">üîç</span>
                        <span>Buscar Mascotas</span>
                    </li>
                    <li class="nav-item" data-section="vet-pets">
                        <span class="nav-icon">üêï</span>
                        <span>Mascotas Autorizadas</span>
                    </li>
                    <li class="nav-item" data-section="vet-settings">
                        <span class="nav-icon">‚öôÔ∏è</span>
                        <span>Configuraci√≥n</span>
                    </li>
                </ul>
            </div>
            
            <div class="nav-section">
                <h3 class="nav-title">Comunidad</h3>
                <ul class="nav-menu">
                    <li class="nav-item" data-section="vets-list">
                        <span class="nav-icon">üè•</span>
                        <span>Veterinarias</span>
                    </li>
                    <li class="nav-item" data-section="social-impact">
                        <span class="nav-icon">‚ù§Ô∏è</span>
                        <span>Impacto Social</span>
                    </li>
                </ul>
            </div>
            
            <div class="nav-section" id="admin-nav" style="display: none;">
                <h3 class="nav-title">Administraci√≥n</h3>
                <ul class="nav-menu">
                    <li class="nav-item" data-section="admin-dashboard">
                        <span class="nav-icon">üõ°Ô∏è</span>
                        <span>Admin Dashboard</span>
                    </li>
                </ul>
            </div>
        </nav>

        <main class="main-content">
            <div id="content-container">
                <!-- Contenido din√°mico se cargar√° aqu√≠ -->
                <div class="loading">
                    <div class="spinner"></div>
                    <p>Cargando aplicaci√≥n...</p>
                </div>
            </div>
        </main>
    </div>

    <!-- Modal para mascotas -->
    <div id="pet-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="pet-modal-title">Nueva Mascota</h2>
                <button class="modal-close" id="pet-modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <form id="pet-form">
                    <div class="form-group">
                        <label class="form-label" for="pet-name">Nombre *</label>
                        <input type="text" id="pet-name" class="form-control" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="pet-species">Especie *</label>
                        <select id="pet-species" class="form-control" required>
                            <option value="">Seleccionar especie</option>
                            <option value="perro">Perro</option>
                            <option value="gato">Gato</option>
                            <option value="conejo">Conejo</option>
                            <option value="ave">Ave</option>
                            <option value="roedor">Roedor</option>
                            <option value="reptil">Reptil</option>
                            <option value="otro">Otro</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="pet-breed">Raza</label>
                        <input type="text" id="pet-breed" class="form-control">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="pet-birthdate">Fecha de nacimiento (aproximada)</label>
                        <input type="date" id="pet-birthdate" class="form-control">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="pet-color">Color</label>
                        <input type="text" id="pet-color" class="form-control">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="pet-microchip">N√∫mero de microchip</label>
                        <input type="text" id="pet-microchip" class="form-control">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="pet-notes">Notas adicionales</label>
                        <textarea id="pet-notes" class="form-control" rows="3"></textarea>
                    </div>
                    
                    <input type="hidden" id="pet-id">
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="pet-modal-cancel">Cancelar</button>
                <button type="button" class="btn btn-primary" id="pet-modal-save">Guardar</button>
            </div>
        </div>
    </div>

    <!-- Modal para autorizaci√≥n veterinaria -->
    <div id="auth-vet-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Autorizar Veterinaria</h2>
                <button class="modal-close" id="auth-vet-modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div id="vet-search-results">
                    <!-- Resultados de b√∫squeda se cargar√°n aqu√≠ -->
                </div>
            </div>
        </div>
    </div>

    <!-- Modal para historial m√©dico -->
    <div id="medical-record-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Nuevo Registro M√©dico</h2>
                <button class="modal-close" id="medical-record-modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <form id="medical-record-form">
                    <div class="form-group">
                        <label class="form-label" for="medical-record-pet">Mascota *</label>
                        <select id="medical-record-pet" class="form-control" required>
                            <option value="">Seleccionar mascota</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="medical-record-title">T√≠tulo *</label>
                        <input type="text" id="medical-record-title" class="form-control" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="medical-record-date">Fecha *</label>
                        <input type="date" id="medical-record-date" class="form-control" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="medical-record-type">Tipo *</label>
                        <select id="medical-record-type" class="form-control" required>
                            <option value="">Seleccionar tipo</option>
                            <option value="consulta">Consulta</option>
                            <option value="vacuna">Vacunaci√≥n</option>
                            <option value="cirugia">Cirug√≠a</option>
                            <option value="examen">Examen</option>
                            <option value="tratamiento">Tratamiento</option>
                            <option value="control">Control</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="medical-record-description">Descripci√≥n *</label>
                        <textarea id="medical-record-description" class="form-control" rows="5" required></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="medical-record-prescription">Prescripci√≥n / Medicamentos</label>
                        <textarea id="medical-record-prescription" class="form-control" rows="3"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="medical-record-next-visit">Pr√≥xima visita recomendada</label>
                        <input type="date" id="medical-record-next-visit" class="form-control">
                    </div>
                    
                    <input type="hidden" id="medical-record-id">
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="medical-record-modal-cancel">Cancelar</button>
                <button type="button" class="btn btn-primary" id="medical-record-modal-save">Guardar</button>
            </div>
        </div>
    </div>

    <!-- Modal para turnos -->
    <div id="appointment-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="appointment-modal-title">Nuevo Turno</h2>
                <button class="modal-close" id="appointment-modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <form id="appointment-form">
                    <div class="form-group">
                        <label class="form-label" for="appointment-pet">Mascota *</label>
                        <select id="appointment-pet" class="form-control" required>
                            <option value="">Seleccionar mascota</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="appointment-vet">Veterinaria *</label>
                        <select id="appointment-vet" class="form-control" required>
                            <option value="">Seleccionar veterinaria</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="appointment-date">Fecha *</label>
                        <input type="date" id="appointment-date" class="form-control" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="appointment-time">Hora *</label>
                        <input type="time" id="appointment-time" class="form-control" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="appointment-type">Tipo de consulta *</label>
                        <select id="appointment-type" class="form-control" required>
                            <option value="">Seleccionar tipo</option>
                            <option value="consulta_general">Consulta General</option>
                            <option value="vacunacion">Vacunaci√≥n</option>
                            <option value="urgencia">Urgencia</option>
                            <option value="control">Control</option>
                            <option value="cirugia">Cirug√≠a</option>
                            <option value="estetica">Est√©tica</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="appointment-reason">Motivo *</label>
                        <textarea id="appointment-reason" class="form-control" rows="3" required></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="appointment-notes">Notas adicionales</label>
                        <textarea id="appointment-notes" class="form-control" rows="2"></textarea>
                    </div>
                    
                    <input type="hidden" id="appointment-id">
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="appointment-modal-cancel">Cancelar</button>
                <button type="button" class="btn btn-primary" id="appointment-modal-save">Guardar</button>
            </div>
        </div>
    </div>

    <!-- Modal para detalles de veterinaria -->
    <div id="vet-details-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Detalles de Veterinaria</h2>
                <button class="modal-close" id="vet-details-modal-close">&times;</button>
            </div>
            <div class="modal-body" id="vet-details-content">
                <!-- Contenido din√°mico -->
            </div>
        </div>
    </div>

    <!-- Modal para QR de mascota -->
    <div id="qr-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">QR de Mascota</h2>
                <button class="modal-close" id="qr-modal-close">&times;</button>
            </div>
            <div class="modal-body" id="qr-content">
                <!-- Contenido din√°mico -->
            </div>
        </div>
    </div>

    <script>
        // Este script solo maneja la configuraci√≥n inicial de Firebase
        // y la llamada a la funci√≥n de inicializaci√≥n
        
        // Configuraci√≥n de Firebase - solo se define aqu√≠
        const firebaseConfig = {
          apiKey: "AIzaSyAOIvnH9_2X75StDWX4Rnh9tRfD9lSIv3E",
          authDomain: "petpro-19db3.firebaseapp.com",
          projectId: "petpro-19db3",
          storageBucket: "petpro-19db3.firebasestorage.app",
          messagingSenderId: "384847276656",
          appId: "1:384847276656:web:ed6a128e5e09ce2e52a2b5"
        };
        
        // Inicializaci√≥n de la aplicaci√≥n cuando el DOM est√© cargado
        document.addEventListener('DOMContentLoaded', () => {
            console.log('DOM cargado, esperando app.js...');
            
            // Peque√±o retardo para asegurar que app.js se haya cargado
            setTimeout(() => {
                if (typeof initializeApp === 'function') {
                    initializeApp();
                } else {
                    console.error('Error: initializeApp no est√° definido en app.js');
                    // Mostrar un error b√°sico si no se carg√≥ app.js
                    document.getElementById('content-container').innerHTML = `
                        <div class="content-header">
                            <h1 class="content-title">Error</h1>
                            <p class="content-subtitle">Ha ocurrido un problema</p>
                        </div>
                        <div class="alert alert-danger">
                            <span>‚ùå</span>
                            <div>
                                <strong>Error:</strong>
                                <p>No se pudo cargar la aplicaci√≥n. Por favor, recarga la p√°gina.</p>
                            </div>
                        </div>
                    `;
                }
            }, 100);
        });
    </script>
</body>
</html>
